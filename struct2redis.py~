import redis
from bestrecipe.models import Recipe
r = redis.StrictRedis(host='localhost', port=6379, db=0)
for i in Recipe.objects.all():
    ingres=i.structuredInstructions
    for ingName,trival in ingres.items():
        r.lpush(ingName,i.id)

for i in Recipe.objects.all():
    ingres=i.structuredInstructions
    for ingName,trival in ingres.items():
        if not r.exists(ingName):
            newSet = set()
            newSet.add(i.id)
            r.set(ingName,newSet)
        else:
            r.sadd(r.get(ingName),i.id)




for key in r.keys():
    r.delete(key)

for key in r.keys():
    r.lrange(key,0,-1)

